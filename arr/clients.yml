services:

################################################################################
##### qbittorent
################################################################################

  qbittorrent:
    container_name: qbittorrent
    image: lscr.io/linuxserver/qbittorrent:latest
    pull_policy: always
    restart: unless-stopped
    network_mode: container:gluetun
    volumes:
      - /config/qbittorrent:/config
      - /libraries/downloads/torrents:/torrents
    environment:
      # ct envvars
      - PUID=1000
      - PGID=1000
      - TZ=${TIMEZONE}
      # qbittorrent envvars
      - WEBUI_PORT=${QBITTORRENT__PORT_1_INT}
    labels:
      # traefik labels
      - traefik.enable=true
      - traefik.http.routers.qbittorrent.entrypoints=websecure
      - traefik.http.routers.qbittorrent.middlewares=authelia
      - traefik.http.routers.qbittorrent.rule=Host(`qbittorrent.${DOMAIN}`)
      - traefik.http.routers.qbittorrent.tls.certresolver=cloudflare
      - traefik.http.services.qbittorrent.loadbalancer.server.port=${QBITTORRENT__PORT_1_INT}
      # flame labels
      - flame.type=app
      - flame.name=qbittorrent
      - flame.url=https://qbittorrent.${DOMAIN}/
      - flame.icon=download

################################################################################
##### sabnzbd
################################################################################

  sabnzbd:
    container_name: sabnzbd
    image: lscr.io/linuxserver/sabnzbd:latest
    pull_policy: always
    restart: unless-stopped
    network_mode: container:gluetun
    volumes:
      - /config/sabnzbd:/config
      - /libraries/downloads/usenet:/usenet
    environment:
      # ct envvars
      - PUID=1000
      - PGID=1000
      - TZ=${TIMEZONE}
      # sabnzbd envvars
    labels:
      # traefik labels
      - traefik.enable=true
      - traefik.enable=true
      - traefik.http.routers.sabnzbd.entrypoints=websecure
      - traefik.http.routers.sabnzbd.middlewares=authelia
      - traefik.http.routers.sabnzbd.rule=Host(`sabnzbd.${DOMAIN}`)
      - traefik.http.routers.sabnzbd.tls.certresolver=cloudflare
      - traefik.http.services.sabnzbd.loadbalancer.server.port=${SABNZBD__PORT_INT}
      # flame labels
      - flame.type=app
      - flame.name=sabnzbd
      - flame.url=https://sabnzbd.${DOMAIN}/
      - flame.icon=target
